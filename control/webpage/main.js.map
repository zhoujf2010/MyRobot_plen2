{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/business_logic/FrameModel.ts","./src/app/business_logic/ModelLoader.ts","./src/app/business_logic/MotionModel.ts","./src/app/business_logic/ThreeModel.ts","./src/app/components/ModelEditorPanel/controller.ts","./src/app/components/ModelEditorPanel/view.html","./src/app/components/ModelEditor/controller.ts","./src/app/components/ModelEditor/view.html","./src/app/components/NewButton/controller.ts","./src/app/components/NewButton/view.html","./src/app/components/OpenButton/controller.ts","./src/app/components/OpenButton/view.html","./src/app/components/SaveButton/controller.ts","./src/app/components/SaveButton/view.html","./src/app/components/TwitterButton/controller.ts","./src/app/components/TwitterButton/view.html","./src/app/services/FrameFactory.ts","./src/app/services/Gscope.ts","./src/app/services/ImageStoreService.ts","./src/app/xyz/xyz.component.ts","./src/app/xyz/xyz.component.html","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'MotionEditor';\n}\n","<div id=\"left_pain\">\n  <div id=\"logo\">\n    <a href=\"/playground/\">\n      <img src=\"./assets/img/logo.png\" width=\"128\" height=\"160\" alt=\"logo\">\n    </a>\n  </div>\n  \n  <div id=\"menu\">\n    <div id=\"social_icons\">\n      <twitter-button></twitter-button>\n      <!-- <facebook-button></facebook-button>\n      <googleplus-button></googleplus-button>\n      <shoppingcart-button></shoppingcart-button> -->\n      <a href=\"./config\">配置</a>\n    </div>\n\n    <div class=\"button-group\">\n      <open-button></open-button>\n      <save-button></save-button>\n    </div>\n    <div class=\"button-group\">\n      <new-button></new-button>\n      <!-- <edit-properties-button></edit-properties-button> -->\n    </div>\n    <div class=\"button-group\">\n      <!-- <sync-button></sync-button>\n      <play-pause-button></play-pause-button> -->\n    </div>\n    <div class=\"button-group\">\n      <!-- <previous-button></previous-button>\n      <next-button></next-button> -->\n    </div>\n  </div>\n</div>\n\n<div id=\"right_pain\">\n  <div id=\"indent_container\">\n    <model-editor></model-editor>\n    <model-editor-panel></model-editor-panel>\n   <!--  <diff-angle-viewer></diff-angle-viewer> -->\n\n    <div id=\"scrollable_container\" scrollable-container auto-resize auto-resize-layout=\"$scrollable_container.layout\" auto-resize-onload=\"true\">\n      <!-- <frame-editor></frame-editor> -->\n    </div>\n  </div>\n</div>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppComponent } from './app.component';\nimport { XyzComponent } from './xyz/xyz.component';\nimport { TwitterButtonController } from './components/TwitterButton/controller';\nimport { OpenButtonController } from './components/OpenButton/controller';\nimport { SaveButtonController } from './components/SaveButton/controller';\nimport { ModelEditorPanelController } from './components/ModelEditorPanel/controller';\nimport { ModelEditorController } from './components/ModelEditor/controller';\nimport { NewButtonController } from './components/NewButton/controller';\n\n\nimport * as $ from 'jquery';\n\nimport {MotionModel} from './business_logic/MotionModel';\nimport {ModelLoader} from './business_logic/ModelLoader';\nimport {ThreeModel} from './business_logic/ThreeModel';\nimport {Gscope} from './services/Gscope';\n\n\n// The application module's namespace definition.\nvar APP_NAME = \"MotionEditor\";\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    XyzComponent,\n    TwitterButtonController,\n    OpenButtonController,\n    SaveButtonController,\n    ModelEditorPanelController,\n    ModelEditorController,\n    NewButtonController\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [MotionModel,\n    ModelLoader,\n    ThreeModel,\n    Gscope\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","/// <reference path=\"./OutputDeviceModel.ts\" />\n\n\nimport * as _ from 'lodash'; \n\nexport class FrameModel\n{\n    _transition_time_ms: number;\n    outputs: Array<OutputDeviceModel>;\n    selected: boolean;\n    image_uri: string;\n\n    constructor(\n        transition_time_ms: number,\n        outputs: Array<OutputDeviceModel>,\n        selected: boolean,\n        image_uri: string\n    )\n    {\n        this._transition_time_ms = transition_time_ms;\n        this.outputs = outputs;\n        this.selected = selected;\n        this.image_uri = image_uri;\n    }\n\n    set transition_time_ms(value: any)\n    {\n        if (_.isString(value))\n        {\n            this._transition_time_ms = _.parseInt(value);\n        }\n\n        if (_.isNumber(value))\n        {\n            this._transition_time_ms = value;\n        }\n    }\n\n    get transition_time_ms()\n    {\n        return this._transition_time_ms;\n    }\n\n    deepCopy(frame: FrameModel|undefined): void\n    {\n        if (frame == undefined)\n            return;\n        this.transition_time_ms = frame.transition_time_ms;\n        this.selected = frame.selected;\n        this.image_uri = frame.image_uri;\n\n        this.outputs = [];\n\n        _.each(frame.outputs, (output: OutputDeviceModel) =>\n        {\n            this.outputs.push(new OutputDeviceModel(output.device, output.value));\n        });\n    }\n}","import { Injectable } from '@angular/core';\nimport * as THREE from 'three';\nimport * as _ from 'lodash'; \n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelLoader\n{\n    home_quaternions: Array<THREE.Quaternion> = [];\n    rotation_axes: Array<THREE.Object3D> = [];\n    not_axes: Array<THREE.Object3D> = [];\n\n    scene: THREE.Scene;\n\n    constructor(\n        // public $rootScope: ng.IRootScopeService,\n        // public $http: ng.IHttpService\n    )\n    {\n        // noop.\n        this.scene = new THREE.Scene();\n    }\n\n    addRotationAxis(object: THREE.Object3D): void\n    {\n        if (/roll$/.test(object.name))\n        {\n            this.rotation_axes.push(object);\n            this.home_quaternions.push(object.quaternion.clone());\n        }\n        else if (/pitch$/.test(object.name))\n        {\n            this.rotation_axes.push(object);\n            this.home_quaternions.push(object.quaternion.clone());\n        }\n        else if (/yaw$/.test(object.name))\n        {\n            this.rotation_axes.push(object);\n            this.home_quaternions.push(object.quaternion.clone());\n        }\n        else\n        {\n            this.not_axes.push(object);\n        }\n\n        if (object.children.length > 0)\n        {\n            _.each(object.children, (child: THREE.Object3D) =>\n            {\n                this.addRotationAxis(child);\n            });\n        }\n    }\n\n    addObject(object: THREE.Object3D): void\n    {\n        this.scene.add(object);\n        this.addRotationAxis(object);\n    }\n\n    setScene(scene: THREE.Scene): void\n    {\n        this.scene.uuid = scene.uuid;\n        this.scene.name = scene.name;\n\n        while (scene.children.length > 0)\n        {\n            this.addObject(scene.children[0]);\n        }\n    }\n\n    getAxisMap(): any\n    {\n        var axis_map = {};\n\n        _.each(this.rotation_axes, (rotation_axis: THREE.Object3D, index: number) =>\n        {\n            axis_map[rotation_axis.name] = index;\n        });\n\n        return axis_map;\n    }\n\n    loadJSON(): void\n    {\n        // this.$http.get(\"./assets/etc/plen2_3dmodel.min.json\")\n        //     .success((data) =>\n        //     {\n        //         var model_obj:any = data;\n\n        //         if (model_obj.metadata.type.toLowerCase() === \"object\")\n        //         {\n        //             var loader = new THREE.ObjectLoader();\n        //             var result = loader.parse(model_obj);\n\n        //             if (result instanceof THREE.Scene)\n        //             {\n        //                 this.setScene(result);\n        //             }\n        //             else\n        //             {\n        //                 this.addObject(result);\n        //             }\n\n        //             this.$rootScope.$broadcast(\"3DModelLoaded\");\n        //         }\n        //     })\n        //     .error(() =>\n        //     {\n        //         alert(\"Loading a 3D model failed. (Please refresh this page.)\");\n        //     });\n    }\n} ","/// <reference path=\"./CodeModel.ts\" />\n/// <reference path=\"./FrameModel.ts\" />\n\nimport { Injectable } from '@angular/core';\nimport {FrameModel} from \"./FrameModel\";\nimport { Subject } from 'rxjs';\nimport {Gscope} from '../services/Gscope';\n\n\nimport * as _ from 'lodash'; \nimport * as $ from 'jquery';\nimport {FrameFactory} from \"../services/FrameFactory\"\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class MotionModel\n{\n    test = new Subject<string>();\n\n    slot: number = 44;\n    name: string = \"Empty\";\n    codes: Array<CodeModel>   = [];\n    frames: Array<FrameModel> = [];\n\n    static MIN_FRAMES: number = 1;\n    static MAX_FRAMES: number = 20;\n\n    static $inject = [\n        \"$scope\",\n    ];\n    \n    constructor(\n        public scope: Gscope,\n        public frame_factory: FrameFactory\n    )\n    {\n        this.frames.push(this.frame_factory.getFrame());\n\n        $(window).on(\"beforeunload\", () =>\n        {\n            this.scope.FrameLoad.next(this.getSelectedFrameIndex()); // rootScope.$broadcast(\"FrameSave\", this.getSelectedFrameIndex());\n            localStorage.setItem(\"motion\", this.saveJSON());\n        });\n    }\n\n    getSelectedFrameIndex(): number\n    {\n        return _.findIndex(this.frames, (frame: FrameModel) => { return frame.selected; });\n    }\n\n    removeFrame(index: number): void\n    {\n        if (this.frames.length !== MotionModel.MIN_FRAMES)\n        {\n            if (this.frames[index].selected === true)\n            {\n                if ((index + 1) === this.frames.length)\n                {\n                    this.selectFrame(index - 1);\n                }\n                else\n                {\n                    this.selectFrame(index + 1);\n                }\n            }\n\n            this.frames.splice(index, 1);\n        }\n        else\n        {\n            this.reset();\n        }\n    }\n\n    addFrame(index: number): void\n    {\n        if (this.frames.length >= MotionModel.MAX_FRAMES)\n        {\n            return;\n        }\n\n        var selected_frame: FrameModel|undefined = _.find(this.frames, (frame: FrameModel) =>\n        {\n            return frame.selected;\n        });\n\n        var copy_index = _.findIndex(this.frames, (frame: FrameModel) => { return frame.selected; });\n        this.scope.FrameLoad.next(copy_index);// this.$rootScope.$broadcast(\"FrameSave\", copy_index);\n\n        var insertion_frame = this.frame_factory.getFrame(false);\n        insertion_frame.deepCopy(selected_frame);\n        insertion_frame.selected = false;\n\n        this.frames.splice(index, 0, insertion_frame);\n        this.selectFrame(index, false);\n    }\n\n    selectFrame(index: number, old_save: boolean = true, broadcast_finished: boolean = true): void\n    {\n        if (old_save)\n        {\n            var old_index = _.findIndex(this.frames,(frame: FrameModel) => { return frame.selected; });\n            this.scope.FrameLoad.next(old_index);// this.$rootScope.$broadcast(\"FrameSave\", old_index);\n        }\n\n        _.each(this.frames, (frame: FrameModel) => { frame.selected = false; });\n        this.frames[index].selected = true;\n        this.scope.FrameLoad.next(index);// this.$rootScope.$broadcast(\"FrameLoad\", index);\n\n        if (broadcast_finished)\n        {\n            this.scope.FrameLoadFinished.next(0);// this.$rootScope.$broadcast(\"FrameLoadFinished\");\n        }\n    }\n\n    selectNextFrame(): void\n    {\n        var index = _.findIndex(this.frames, (frame: FrameModel) => { return frame.selected; });\n\n        if ((index + 1) !== this.frames.length)\n        {\n            this.selectFrame(index + 1);\n        }\n    }\n\n    selectPrevFrame(): void\n    {\n        var index = _.findIndex(this.frames, (frame: FrameModel) =>{ return frame.selected; });\n\n        if (index !== 0)\n        {\n            this.selectFrame(index - 1);\n        }\n    }\n\n    reset(): void\n    {\n        this.name   = \"Empty\";\n        this.slot   = 44;\n        this.codes  = [];\n        this.frames = [this.frame_factory.getFrame()];\n\n        this.scope.FrameLoad.next(0);// this.$rootScope.$broadcast(\"FrameLoad\", 0);\n    }\n\n    loadJSON(motion_json: string, axis_map: any): void\n    {\n        try {\n            var motion_obj = JSON.parse(motion_json);\n\n            if (_.isUndefined(motion_obj.slot) || !_.isNumber(motion_obj.slot))\n            {\n                throw \"Bad format!\";\n            }\n\n            if (_.isUndefined(motion_obj.name) || !_.isString(motion_obj.name))\n            {\n                throw \"Bad format!\";\n            }\n\n            if (_.isUndefined(motion_obj.codes) || !_.isArray(motion_obj.codes))\n            {\n                throw \"Bad format!\";\n            }\n\n            _.each(motion_obj.codes, (code: CodeModel) =>\n            {\n                if (_.isUndefined(code.method) || !_.isString(code.method))\n                {\n                    throw \"Bad format!\";\n                }\n\n                if (_.isUndefined(code.arguments) || !_.isArray(code.arguments))\n                {\n                    throw \"Bad format!\";\n                }\n                else\n                {\n                    _.each(code.arguments, (argment: number) =>\n                    {\n                        if (!_.isNumber(argment))\n                        {\n                            throw \"Bad format!\";\n                        }\n                    });\n                }\n            });\n\n            if (_.isUndefined(motion_obj.frames) || !_.isArray(motion_obj.frames))\n            {\n                throw \"Bad format!\";\n            }\n            else\n            {\n                _.each(motion_obj.frames, (frame: FrameModel) =>\n                {\n                    if (_.isUndefined(frame.transition_time_ms) || !_.isNumber(frame.transition_time_ms))\n                    {\n                        throw \"Bad format!\";\n                    }\n\n                    if (_.isUndefined(frame.outputs) || !_.isArray(frame.outputs))\n                    {\n                        throw \"Bad format!\";\n                    }\n                    else\n                    {\n                        _.each(frame.outputs, (output: OutputDeviceModel) =>\n                        {\n                            if (_.isUndefined(output.device) || !_.isString(output.device))\n                            {\n                                throw \"Bad format!\";\n                            }\n\n                            if (_.isUndefined(output.value) || !_.isNumber(output.value))\n                            {\n                                throw \"Bad format!\";\n                            }\n                        });\n                    }\n                });\n            }\n\n            this.slot  = motion_obj.slot;\n            this.name  = motion_obj.name;\n\n            this.codes = [];\n            _.each(motion_obj.codes, (code: CodeModel) =>\n            {\n                var args = [];\n                _.each(code.arguments, (argment: any) =>\n                {\n                    args.push(argment as never);\n                });\n\n                this.codes.push(new CodeModel(code.method, args));\n            });\n\n            this.frames = [];\n            _.each(motion_obj.frames, (frame: FrameModel) =>\n            {\n                var outputs = [] as any;\n                _.each(frame.outputs, (output: OutputDeviceModel) =>\n                {\n                    outputs[axis_map[output.device]] = new OutputDeviceModel(output.device, output.value);\n                });\n\n                this.frames.push(new FrameModel(frame.transition_time_ms, outputs, false, \"\"));\n            });\n\n            this.selectFrame(0, false);\n        }\n        catch (exception)\n        {\n            alert(\"Loading a motion file failed. This file has invalid format.\");\n        }\n    }\n\n    saveJSON(): string\n    {\n        var motion_obj = {\n            slot: this.slot,\n            name: this.name,\n            codes: this.codes,\n            frames: []\n        };\n\n        _.each(this.frames, (frame: FrameModel) =>\n        {\n            var pure_frame: any = {};\n            pure_frame.transition_time_ms = frame._transition_time_ms;\n            pure_frame.outputs = frame.outputs;\n\n            _.each(pure_frame.outputs, (output: OutputDeviceModel) =>\n            {\n                output.value = Math.round(output.value);\n            });\n\n            motion_obj.frames.push(pure_frame as never);\n        });\n\n        return JSON.stringify(motion_obj, null, \"\\t\");\n    }\n} ","import { Injectable } from '@angular/core';\nimport * as THREE from 'three';\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { TransformControls } from \"three/examples/jsm/controls/TransformControls\";\n\nimport * as _ from 'lodash'; \n\n// @todo Divide into isolated *.d.ts.\n// declare module THREE\n// {\n//     class TransformControls\n//     {\n//         constructor(object: Camera, domElement?: HTMLElement);\n\n//         setSpace(__: string): void;\n//         setMode(__: string): void;\n//         $onPointerDown(__: any): void;\n\n//         object: Object3D;\n//     }\n// }\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ThreeModel\n{\n    layout: any;\n\n    scene: THREE.Scene;\n    camera: THREE.PerspectiveCamera;\n    grid: THREE.GridHelper;\n    light: THREE.SpotLight;\n    renderer: THREE.WebGLRenderer;\n\n    home_quaternions: Array<THREE.Quaternion> = [];\n    rotation_axes: Array<THREE.Object3D> = [];\n    not_axes: Array<THREE.Object3D> = [];\n\n    orbit_controls: OrbitControls;\n    transform_controls: any;\n\n    constructor()\n    {\n        // noop.\n    }\n\n    init($element: any, layout: any): void\n    {\n        this.layout = layout;\n        var width  = this.layout.width();\n        var height = this.layout.height();\n\n        this.scene = new THREE.Scene();\n\n        this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 5000);\n        this.camera.up.set(0, 1, 0);\n        this.camera.position.set(200, 200, 500);\n\n        this.grid = new THREE.GridHelper(1000, 100);\n        this.grid.position.set(0, 0, 0);\n        this.grid.setColors(0xB2DB11, 0xFFFFFF);\n        this.scene.add(this.grid);\n\n        this.light = new THREE.SpotLight(0xBBBBBB);\n        this.scene.add(this.light);\n\n        this.renderer = new THREE.WebGLRenderer({ preserveDrawingBuffer: true });\n        this.renderer.setSize(width, height);\n        this.renderer.setClearColor(0x66BB6A);\n\n        this.orbit_controls = new OrbitControls(this.camera, this.renderer.domElement);\n        this.orbit_controls.zoomSpeed = 0.3;\n        this.orbit_controls.minDistance = 10;\n        this.orbit_controls.maxDistance = 2000;\n        this.orbit_controls.enabled = true;\n\n        this.transform_controls = new TransformControls(this.camera, this.renderer.domElement);\n        this.transform_controls.setSpace(\"local\");\n        this.transform_controls.setMode(\"rotate\");\n        this.scene.add(this.transform_controls);\n\n        $element.append(this.renderer.domElement);\n\n        this.renderer.render(this.scene, this.camera);\n    }\n\n    reset(): void\n    {\n        _.each(this.rotation_axes, (axis: THREE.Object3D, index: number) =>\n        {\n            axis.quaternion.copy(this.home_quaternions[index]);\n        });\n    }\n\n    resize(): void\n    {\n        var width  = this.layout.width();\n        var height = this.layout.height();\n\n        this.camera.aspect = width / height;\n        this.camera.updateProjectionMatrix();\n\n        this.renderer.setSize(width, height);\n    }\n\n    animate(): void\n    {\n        this.refresh();\n\n        requestAnimationFrame(() => { this.animate(); });\n    }\n\n    refresh(): void\n    {\n        this.orbit_controls.update();\n        this.transform_controls.update();\n\n        var theta  = Math.atan2(this.camera.position.x, this.camera.position.z);\n        var phi    = Math.atan2(Math.sqrt(this.camera.position.x * this.camera.position.x + this.camera.position.z * this.camera.position.z), this.camera.position.y);\n        var radius = Math.sqrt(3) * 1000;\n        \n        this.light.position.x = radius * Math.sin(phi) * Math.sin(theta);\n        this.light.position.y = radius * Math.cos(phi);\n        this.light.position.z = radius * Math.sin(phi) * Math.cos(theta);\n\n        this.renderer.render(this.scene, this.camera);\n    }\n\n    intersect(screen_x: number, screen_y: number): boolean\n    {\n        var rect = this.renderer.domElement.getBoundingClientRect();\n        var x = (screen_x - rect.left) / rect.width;\n        var y = (screen_y - rect.top) / rect.height;\n\n        var pointer_vector = new THREE.Vector3((x * 2) - 1, -(y * 2) + 1, 0.5);\n        pointer_vector.unproject(this.camera);\n\n        \n        var ray = new THREE.Raycaster(\n            this.camera.getWorldPosition(pointer_vector),\n            pointer_vector.sub(this.camera.getWorldPosition(pointer_vector)).normalize()\n        );\n\n        var intersections = ray.intersectObjects(this.not_axes, true);\n        var result: boolean = false;\n\n        if (intersections[0])\n        {\n            _.each(this.rotation_axes, (axis: THREE.Object3D) =>\n            {\n                if (axis === intersections[0].object.parent)\n                {\n                    this.transform_controls.attach(axis);\n                    this.orbit_controls.enabled = false;\n                    result = true;\n\n                    return false;\n                }\n                else\n                {\n                    this.orbit_controls.enabled = true;\n                    return true;\n                }\n            });\n        }\n\n        return result;\n    }\n\n    reverse3DModel(): void\n    {\n        var length_half = this.rotation_axes.length / 2;\n\n        for (var index = 0; index < length_half; index++)\n        {\n            var angle_diff_rhs = this.getDiffAngle(this.rotation_axes[index], index);\n            var angle_diff_lhs = this.getDiffAngle(this.rotation_axes[length_half + index], length_half + index);\n\n            this.setDiffAngle(this.rotation_axes[index], -angle_diff_lhs, index);\n            this.setDiffAngle(this.rotation_axes[length_half + index], -angle_diff_rhs, length_half + index);\n        }\n    }\n\n    copyRightToLeft(): void\n    {\n        var length_half = this.rotation_axes.length / 2;\n\n        for (var index = 0; index < length_half; index++)\n        {\n            var angle_diff_rhs = this.getDiffAngle(this.rotation_axes[index], index);\n            this.setDiffAngle(this.rotation_axes[length_half + index], -angle_diff_rhs, length_half + index);\n        }\n    }\n\n    copyLeftToRight(): void\n    {\n        var length_half = this.rotation_axes.length / 2;\n\n        for (var index = 0; index < length_half; index++)\n        {\n            var angle_diff_lhs = this.getDiffAngle(this.rotation_axes[length_half + index], length_half + index);\n            this.setDiffAngle(this.rotation_axes[index], -angle_diff_lhs, index);\n        }\n    }\n\n    getDiffAngle(axis_object: THREE.Object3D, index: number = 0): any\n    {\n        var angle_diff = 0;\n\n        if (!_.isUndefined(axis_object))\n        {\n            if (_.isNull(index))\n            {\n                index = _.findIndex(this.rotation_axes, (axis: THREE.Object3D) =>\n                {\n                    return axis === axis_object;\n                });\n            }\n\n            var home_quaternion = this.home_quaternions[index].clone();\n            var axis_quaternion = this.rotation_axes[index].quaternion.clone();\n            var target_quaternion = home_quaternion.inverse().multiply(axis_quaternion);\n\n            var theta_half_diff = Math.atan2(target_quaternion.y, target_quaternion.w);\n\n            if (Math.abs(theta_half_diff * 2) > Math.PI)\n            {\n                var theta_diff = 2 * Math.PI - Math.abs(theta_half_diff * 2);\n\n                if (theta_half_diff > 0)\n                {\n                    theta_diff *= -1;\n                }\n            }\n            else\n            {\n                var theta_diff = theta_half_diff * 2;\n            }\n\n            angle_diff = Math.round(theta_diff * 1800 / Math.PI);\n        }\n\n        return angle_diff;\n    }\n\n    setDiffAngle(axis_object: THREE.Object3D, angle_diff: number, index: number = 0): void\n    {\n        var theta_diff = angle_diff * Math.PI / 1800;\n\n        if (_.isNull(index))\n        {\n            index = _.findIndex(this.rotation_axes, (axis: THREE.Object3D) =>\n            {\n                return axis === axis_object;\n            });\n        }\n\n        var home_quaternion = this.home_quaternions[index].clone();\n\n        var target_quaternion = new THREE.Quaternion();\n        target_quaternion.setFromAxisAngle(new THREE.Vector3(0, 1, 0), theta_diff);\n\n        home_quaternion.multiply(target_quaternion);\n        this.rotation_axes[index].quaternion.copy(home_quaternion);\n    }\n} ","\nimport { Component, OnInit } from '@angular/core';\nimport {ThreeModel} from '../../business_logic/ThreeModel';\n\nimport {Gscope} from '../../services/Gscope';\n\n@Component({\n    selector: 'model-editor-panel',\n    templateUrl: './view.html',\n    styleUrls: []\n  })\n  export class ModelEditorPanelController\n{\n    disabled: boolean = false;\n\n    private _three_model: ThreeModel;\n\n    static $inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"SharedThreeService\"\n    ];\n\n    constructor(\n        // $scope: ng.IScope,\n        // public $rootScope: ng.IRootScopeService,\n        scope:Gscope,\n        three_model: ThreeModel\n    )\n    {\n        this._three_model = three_model;\n\n        // $scope.$on(\"ComponentDisabled\", () => { this.disabled = true; });\n        // $scope.$on(\"ComponentEnabled\", () => { this.disabled = false; });\n    }\n\n    onClick(id: number): void\n    {\n        switch (id)\n        {\n            case 0:\n                this._three_model.reverse3DModel();\n\n                break;\n\n            case 1:\n                this._three_model.copyRightToLeft();\n\n                break;\n\n            case 2:\n                this._three_model.copyLeftToRight();\n\n                break;\n\n            case 3:\n                this._three_model.orbit_controls.reset();\n\n                break;\n\n            case 4:\n                // this.$rootScope.$broadcast(\"3DModelReset\");\n\n                break;\n\n            default:\n                return;\n        }\n\n        // this.$rootScope.$broadcast(\"RefreshThumbnail\");\n    }\n} ","<div id=\"model_editor_panel\">\n  <button type=\"button\" ng-click=\"$ctrl.onClick(0)\" ng-disabled=\"$ctrl.disabled\" title=\"Reverse the left side and right side of the 3D model.\">\n    <i class=\"fa fa-fw fa-arrows-h fa-3x\"></i>\n  </button>\n  <button type=\"button\" ng-click=\"$ctrl.onClick(2)\" ng-disabled=\"$ctrl.disabled\" title=\"Copy the right side to left side of the 3D model.\">\n    <i class=\"fa fa-fw fa-long-arrow-left fa-3x\"></i>\n  </button>\n  <button type=\"button\" ng-click=\"$ctrl.onClick(1)\" ng-disabled=\"$ctrl.disabled\" title=\"Copy the left side to right side of the 3D model.\">\n    <i class=\"fa fa-fw fa-long-arrow-right fa-3x\"></i>\n  </button>\n  <button type=\"button\" ng-click=\"$ctrl.onClick(4)\" ng-disabled=\"$ctrl.disabled\" title=\"Initialize the 3D model.\">\n    <i class=\"fa fa-fw fa-male fa-4x\"></i>\n  </button>\n  <button type=\"button\" ng-click=\"$ctrl.onClick(3)\" title=\"Reset the camera position.\">\n    <i class=\"fa fa-fw fa-camera fa-3x\"></i>\n  </button>\n</div>\n","/// <reference path=\"../../services/SharedThreeService.ts\" />\n/// <reference path=\"../../services/SharedMotionService.ts\" />\n/// <reference path=\"../../services/ImageStoreService.ts\" />\n\nimport { Component, OnInit } from '@angular/core';\nimport {ThreeModel} from '../../business_logic/ThreeModel';\nimport {ModelLoader} from '../../business_logic/ModelLoader';\nimport {FrameModel} from '../../business_logic/FrameModel';\nimport {MotionModel} from '../../business_logic/MotionModel';\nimport {ImageStoreService} from '../../services/ImageStoreService';\nimport {Gscope} from '../../services/Gscope';\n\nimport * as _ from 'lodash'; \nimport { Object3D } from 'three';\n\n\n@Component({\n    selector: 'model-editor',\n    templateUrl: './view.html',\n    styleUrls: []\n  })\n  export class ModelEditorController\n{\n    disabled: boolean = false;\n\n    static $inject = [\n        \"$scope\",\n        \"ModelLoaderService\",\n        \"SharedThreeService\",\n        \"SharedMotionService\",\n        \"ImageStoreService\"\n    ];\n\n    constructor(\n        // $scope: ng.IScope,\n        public scope: Gscope,\n        public model_loader: ModelLoader,\n        public three_model: ThreeModel,\n        public motion: MotionModel,\n        public image_store_service: ImageStoreService\n    )\n    {\n        \n        scope.ComponentDisabled.subscribe((item)=>{this.disabled = true;});\n        scope.ComponentEnabled.subscribe((item)=>{this.disabled = false;});\n        scope.E3DModelReset.subscribe((item)=>{this.on3DModelReset();});\n        scope.E3DModelLoaded.subscribe((item)=>{this.on3DModelLoaded();});\n        \n        scope.RefreshThumbnail.subscribe((item)=>{this.onRefreshThumbnail();});\n        scope.FrameSave.subscribe((item)=>{this.onFrameSave(item); });\n        scope.FrameLoad.subscribe((item)=>{this.onFrameLoad(item);});\n    }\n\n    on3DModelLoaded(): void\n    {\n        this.setImage();\n\n        this.three_model.home_quaternions = this.model_loader.home_quaternions;\n        this.three_model.rotation_axes = this.model_loader.rotation_axes;\n        this.three_model.not_axes = this.model_loader.not_axes;\n\n        var json = localStorage.getItem(\"motion\");\n\n        if (!_.isNull(json))\n        {\n            this.motion.loadJSON(json, this.model_loader.getAxisMap());\n        }\n    }\n\n    on3DModelReset(): void\n    {\n        this.three_model.reset();\n        this.setImage();\n    }\n\n    onRefreshThumbnail(): void\n    {\n        this.setImage();\n    }\n\n    onFrameSave(frame_index: number): void\n    {\n        this.motion.frames[frame_index].outputs = [];\n\n        _.each(this.three_model.rotation_axes, (axis: THREE.Object3D, index: number) =>\n        {\n            this.motion.frames[frame_index].outputs.push(new OutputDeviceModel(\n                axis.name,\n                this.three_model.getDiffAngle(axis, index)\n            ));\n        });\n    }\n\n    onFrameLoad(frame_index: number): void\n    {\n        if (_.isEmpty(this.motion.frames[frame_index].outputs))\n        {\n            this.three_model.reset();\n            this.setImage();\n        }\n        else\n        {\n            _.each(this.motion.frames[frame_index].outputs, (output: OutputDeviceModel, index: number) =>\n            {\n                this.three_model.setDiffAngle(new Object3D(), output.value, index);\n            });\n        }\n\n        if (_.isEmpty(this.motion.frames[frame_index].image_uri))\n        {\n            this.setImage();\n        }\n    }\n\n    onFocus($event): void\n    {\n        if (this.disabled)\n        {\n            return;\n        }\n\n        if (!_.isUndefined($event.touches))\n        {\n            if ($event.touches.length === 1)\n            {\n                var intersected: boolean = this.three_model.intersect($event.clientX, $event.clientY);\n\n                if (intersected)\n                {\n                    this.three_model.transform_controls.$onPointerDown($event);\n                }\n            }\n        }\n        else\n        {\n            var intersected: boolean = this.three_model.intersect($event.clientX, $event.clientY);\n\n            if (intersected)\n            {\n                this.three_model.transform_controls.$onPointerDown($event);\n            }\n        }\n    }\n\n    onUnfocus(): void\n    {\n        this.three_model.transform_controls.detach();\n        this.three_model.orbit_controls.enabled = true;\n\n        this.setImage();\n    }\n\n    setImage(): void\n    {\n        this.three_model.refresh();\n\n        var image = this.three_model.renderer.domElement;\n        this.image_store_service.set(image);\n\n        var selected_frame = _.find(this.motion.frames,(frame: FrameModel) =>\n        {\n            return frame.selected;\n        });\n        if ( selected_frame!= undefined)\n            selected_frame.image_uri = this.image_store_service.get();\n    }\n}","<div id=\"model_editor\">\n    <div id=\"canvas_wrapper\" auto-resize auto-resize-layout=\"$model_editor.layout\" auto-resize-onload=\"true\"></div>\n</div>\n","/// <reference path=\"../../services/SharedMotionService.ts\" />\n\nimport {Gscope} from '../../services/Gscope';\nimport { Component, OnInit } from '@angular/core';\nimport {MotionModel} from '../../business_logic/MotionModel';\n\n\n@Component({\n    selector: 'new-button',\n    templateUrl: './view.html',\n    styleUrls: []\n  })\n  export class NewButtonController\n{\n    disabled: boolean = false;\n\n    constructor(\n        public scope: Gscope,\n        public motion: MotionModel\n    )\n    {\n        scope.ComponentDisabled.subscribe((item)=>{this.disabled = true;});\n        scope.ComponentEnabled.subscribe((item)=>{this.disabled = false;});\n    }\n\n    onClick(): void\n    {\n        var result = window.confirm(\n`Are you sure you want to create a new motion?\n\nWorking contents will have destroyed.\nIf your motion has not been saved yet, please click to the \"Cancel\" button.`\n        );\n\n        if (result === true)\n        {\n            this.motion.reset();\n            this.scope.E3DModelReset.next(0); //this.$rootScope.$broadcast(\"3DModelReset\");\n        }\n    }\n}","<button (click)=\"onClick()\" [disabled]=\"disabled\" class=\"button-menu\" type=\"button\" title=\"Create a new motion.\">\n    <i class=\"fa fa-fw fa-user-plus fa-4x\"></i>\n</button>","import { Component, OnInit } from '@angular/core';\r\n\r\n/// <reference path=\"../../services/SharedMotionService.ts\" />\r\n\r\n// import { MotionModel } from '../../services/SharedMotionService';\r\nimport {MotionModel} from '../../business_logic/MotionModel';\r\nimport {ModelLoader} from '../../business_logic/ModelLoader';\r\n// import {EventService} from '../../services/EventService';\r\n\r\nimport * as $ from 'jquery';\r\n\r\n@Component({\r\n    selector: 'open-button',\r\n    templateUrl: './view.html',\r\n    styleUrls: []\r\n  })\r\nexport class OpenButtonController\r\n{\r\n    disabled: boolean = false;\r\n\r\n    static $inject = [\r\n        \"$scope\",\r\n        \"SharedMotionService\"\r\n    ];\r\n\r\n    constructor(\r\n    //    $scope: ng.IScope, \r\n    // $scope: app.IScope,\r\n    //    public event:EventService<string>,\r\n        public motion: MotionModel,\r\n        public model_loader: ModelLoader \r\n    )\r\n    {\r\n        // var scope = $rootScope;\r\n\r\n        // $scope.$on(\"ComponentDisabled\", () => { this.disabled = true; });\r\n        // $scope.$on(\"ComponentEnabled\", () => { this.disabled = false; });\r\n\r\n        // event.Subscribe(\"aa\").subscribe((item)=>{alert(item);});\r\n        motion.test.subscribe((item)=>{alert(item);});\r\n    }\r\n\r\n    onchange(event:any):void{\r\n        var reader = new FileReader();\r\n        reader.onload = (event: any) =>\r\n        {\r\n            // this.event.Broadcast(\"aa\",\"xxx\");\r\n            // alert(event.target.result);\r\n            this.motion.loadJSON(event.target.result, this.model_loader.getAxisMap());\r\n            // $scope.$ctrl.motion.loadJSON(event.target.result, model_loader.getAxisMap());\r\n            // $scope.$apply();\r\n        };\r\n\r\n        reader.readAsText(event.target.files[0]);\r\n    }\r\n} ","<div class=\"button-open\">\n    <button class=\"button-menu\" type=\"button\">\n        <i class=\"fa fa-fw fa-folder-open fa-4x\"></i>\n    </button>\n    <input type=\"file\" ng-disabled=\"$ctrl.disabled\" (change)=\"onchange($event)\" class=\"input-motion\" accept=\".json\" title=\"Open a motion.\">\n</div>","///// <reference path=\"../../services/SharedMotionService.ts\" />\nimport { Component, OnInit } from '@angular/core';\nimport {MotionModel} from '../../business_logic/MotionModel';\n\n@Component({\n    selector: 'save-button',\n    templateUrl: './view.html',\n    styleUrls: []\n  })\n  export class SaveButtonController\n{\n    disabled: boolean = false;\n\n    // static $inject = [\n    //     \"$rootScope\",\n    //     \"$scope\",\n    //     \"$element\",\n    //     \"SharedMotionService\"\n    // ];\n\n    constructor(\n        // public $rootScope: ng.IRootScopeService,\n        // $scope: ng.IScope,\n        // public $element,\n        public motion: MotionModel\n    )\n    {\n        // $scope.$on(\"ComponentDisabled\", () => { this.disabled = true; });\n        // $scope.$on(\"ComponentEnabled\", () => { this.disabled = false; });\n\n        // $element.on(\"touchstart\", () => { this.onClick(); });\n    }\n\n    onClick(): void\n    {\n        if (!this.disabled)\n        {\n            // this.$rootScope.$broadcast(\"FrameSave\", this.motion.getSelectedFrameIndex());\n            this.setDownloadLink();\n        }\n    }\n\n    setDownloadLink(): void\n    {\n        var json_blob = new Blob([this.motion.saveJSON()], { type: \"text/plain\" });\n\n        // if (navigator.msSaveBlob)\n        // {\n        //     navigator.msSaveBlob(json_blob, this.motion.name + \".json\");\n        // }\n        // else\n        // {\n        //     var reader = new FileReader();\n        //     reader.onload = (event: any) =>\n        //     {\n        //         this.$element[0].href = reader.result;\n        //     };\n\n        //     reader.readAsDataURL(json_blob);\n        // }\n    }\n}  ","<a class=\"button-menu\"\n   href=\"\" target=\"_blank\"\n   download=\"{{ motion.name + '.json' }}\"\n   ng-class=\"{ 'disabled': $ctrl.disabled }\"\n   ng-mousedown=\"$ctrl.onClick()\"\n   title=\"Save a motion.\"\n>\n    <i class=\"fa fa-fw fa-floppy-o fa-4x\"></i>\n</a>\n","import { Component, OnInit } from '@angular/core';\r\nimport * as angular from \"angular\";\r\n\r\n\r\n\r\n@Component({\r\n    selector: 'twitter-button',\r\n    templateUrl: './view.html',\r\n    styleUrls: []\r\n  })\r\n\r\nexport class TwitterButtonController\r\n{\r\n    href: string;\r\n\r\n    static $inject = ['$window'];\r\n    ttitle = \"aaa\";\r\n    \r\n\r\n    constructor(\r\n    )\r\n    {\r\n        this.href = \"http://twitter.com/share?text=あなた好みにPLENを動かそう！「PLEN - Motion Editor for Web.」は、誰でも簡単にPLENのモーションを作成できるwebアプリです。&url=http://plen.jp/playground/motion-editor/&hashtags=PLEN\";\r\n    }\r\n\r\n    onClick(): void\r\n    {\r\n        window.open(\r\n            encodeURI(this.href),\r\n            'tweeter_window',\r\n            'width=650,height=470,menubar=no,toolbar=no,location=no,scrollbars=yes,sizable=yes'\r\n        );\r\n    }\r\n}  ","<span class=\"fa-stack fa-lg button-social\">\r\n    <a (click)=\"onClick()\">\r\n        <i class=\"fa fa-circle fa-stack-2x button-twitter\"></i>\r\n        <i class=\"fa fa-twitter fa-stack-1x fa-inverse\"></i>\r\n    </a>\r\n</span>\r\n","/// <reference path=\"./ImageStoreService.ts\" />\n/// <reference path=\"../business_logic/FrameModel.ts\" />\n\nimport {ImageStoreService} from \"../services/ImageStoreService\";\nimport {FrameModel} from \"../business_logic/FrameModel\";\n\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class FrameFactory\n{\n    static $inject = [\n        \"ImageStoreService\"\n    ];\n\n    constructor(\n        public image_store_service: ImageStoreService\n    )\n    {\n        // noop.\n    }\n\n    getFrame(selected: boolean = true): FrameModel\n    {\n        return new FrameModel(\n            500,\n            [],\n            selected,\n            this.image_store_service.get()\n        );\n    }\n}\n\n// angular.module(APP_NAME).service(\"FrameFactory\", FrameFactory); ","\r\nimport { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class Gscope\r\n{\r\n    \r\n    // FrameLoadevent = new Subject<number>();\r\n    // FrameLoadFinishedevent = new Subject<any>();\r\n\r\n    ComponentDisabled = new Subject<any>();\r\n    ComponentEnabled = new Subject<any>();\r\n    E3DModelReset  = new Subject<any>();\r\n    E3DModelLoaded  = new Subject<any>();\r\n\r\n    RefreshThumbnail  = new Subject<any>();\r\n    FrameSave  = new Subject<any>();\r\n    FrameLoad  = new Subject<number>();\r\n    FrameLoadFinished = new Subject<any>();\r\n\r\n}","\nimport { Injectable } from '@angular/core';\n\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ImageStoreService\n{\n    private _image_canvas;\n    private _context;\n\n    constructor()\n    {\n        this._image_canvas = document.createElement(\"canvas\");\n        this._image_canvas.width  = 150;\n        this._image_canvas.height = 150;\n\n        this._context = this._image_canvas.getContext(\"2d\");\n    }\n\n    set(image: any): void\n    {\n        var sx, sy, sw, sh;\n\n        if (image.width > image.height)\n        {\n            sy = 0;\n            sw = image.height;\n            sh = image.height;\n\n            sx = (image.width - sw) / 2;\n        }\n        else\n        {\n            sx = 0;\n            sw = image.width;\n            sh = image.width;\n\n            sy = (image.height - sh) / 2;\n        }\n\n        this._context.drawImage(image, sx, sy, sw, sh, 0, 0, 150, 150);\n    }\n\n    get(): string\n    {\n        return this._image_canvas.toDataURL();\n    }\n}\n\n// angular.module(APP_NAME).service(\"ImageStoreService\", ImageStoreService);","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-xyz',\n  templateUrl: './xyz.component.html',\n  styleUrls: ['./xyz.component.css']\n})\nexport class XyzComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onClickxx(): void\n  {\n      alert(1);\n  }\n}\n","<p>xyz works!</p>\n<button (click)=\"onClickxx()\">aaaxx按钮</button>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n// import * as angular from 'angular';\n\n// import {MotionModel} from './app/business_logic/MotionModel';\n\n// The application module's namespace definition.\nvar APP_NAME = \"MotionEditor\";\n\n// angular.module(APP_NAME, [])\n//   .service(\"SharedMotionService\",\n//   [\n//       \"$rootScope\",\n//       \"FrameFactory\",\n//       MotionModel\n//   ])\n \n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n\n"],"names":[],"sourceRoot":"webpack:///"}